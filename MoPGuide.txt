MoP Watchdog GUI ‚Äì Setup & Installation Guide
This guide walks you through installing, configuring, and running the MoP Watchdog GUI and its paired watchdog.ps1 monitor script for your MoP private server stack (MySQL, Authserver, Worldserver).
All instructions assume Windows 10/11 with PowerShell 5.1.
________________________________________
 1. Folder Structure
Create a folder to store everything, for example:
C:\MoPWatcher\ (Or simply place the files inside your ‚ÄúRepack‚Äù folder)
Inside it, place the following files:

MoPWatcherGUI.ps1 - The WPF graphical UI
watchdog.ps1      -	The background process monitor
config.json       - Stores your paths & NTFY settings (auto-generated)
watchdog.log      - Log file generated by the watchdog (auto-generated)
stop_watchdog.txt -	Temporary signal file to stop watchdog (auto, no need to touch usually)

Resulting structure:
C:\MoPWatcher\
 ‚îú‚îÄ MoPWatcherGUI.ps1
 ‚îú‚îÄ watchdog.ps1
 ‚îú‚îÄ config.json
 ‚îú‚îÄ watchdog.log
 ‚îî‚îÄ stop_watchdog.txt  (created when stopping)
 
 2. Running the GUI
Right-click MoPWatcherGUI.ps1 ‚Üí Run with PowerShell
‚Äîor‚Äî
Run from a PowerShell window:
powershell -ExecutionPolicy Bypass -File "C:\MoPWatcher\MoPWatcherGUI.ps1"
The GUI will launch with:
‚Ä¢	Rounded dark/blue window
‚Ä¢	Custom title bar
‚Ä¢	Resizable autoscaling layout
‚Ä¢	Scrollable sections

 3. First-Time Configuration
Open the GUI ‚Üí Fill out the three server paths:
 MySQL Script
Your .bat that starts MySQL:
C:\path\to\mysql_start.bat
 Authserver EXE
Example:
C:\mop\bin\authserver.exe
 Worldserver EXE
Example:
C:\mop\bin\worldserver.exe
Click Save Config to store paths to config.json.

 4. (Optional) Enabling NTFY Notifications
If you use ntfy.sh or a self-hosted ntfy server:
1.	Enter your server URL
Example:
2.	https://ntfy.sh
3.	Enter your topic
Example:
4.	mop-watchdog
5.	Choose which services should send notifications:
o	MySQL
o	Authserver
o	Worldserver
6.	Choose when to send:
o	 Send on DOWN (service crashes or stops)
o	 Send on UP (service restarts or comes back online)
7.	Click Test Notification to confirm delivery.
 Smart Notification Logic
‚Ä¢	The system captures a baseline on startup
‚Ä¢	A 2-second suppression avoids false "DOWN" messages when opening the GUI
‚Ä¢	Only true state changes trigger alerts

 5. Starting & Stopping the Watchdog
 Start Watchdog
This launches watchdog.ps1 in the background as a hidden PowerShell process and begins monitoring:
‚Ä¢	mysqld
‚Ä¢	authserver
‚Ä¢	worldserver
If any process stops, the watchdog restarts it (depending on your watchdog script logic), and the GUI updates instantly.
The GUI shows:
Watchdog: Running (PID ####)
 Stop Watchdog
The GUI writes stop_watchdog.txt, which your watchdog loop detects and exits cleanly.

 6. Optional: Installing as a Windows Service
The GUI includes built-in service management.
Install
Click:
Install Service
This creates:
MoPWatchdog
as a Windows service configured to run the watchdog on boot.
Start / Stop / Remove
Use the buttons:
‚Ä¢	Start Svc
‚Ä¢	Stop Svc
‚Ä¢	Uninstall
Requires Run as Administrator.

 7. Live Log Viewer
The GUI includes a dedicated scrolling log window.
‚Ä¢	Shows the contents of watchdog.log
‚Ä¢	Updates once per second
‚Ä¢	Independent scroll bar
‚Ä¢	Automatically scrolls to end
Resize the window to give yourself more log space.

 8. LED Status Indicators
Each service has a small LED:
LED	Meaning
üü¢ pulsing	Running
üî¥ solid	Stopped
‚ö™ gray	Not detected yet
The Pulse animation is smooth and low-CPU.

 9. Auto-scaling Layout
The entire GUI is built with:
‚Ä¢	Responsive WrapPanels
‚Ä¢	ScrollViewer for all top controls
‚Ä¢	Dedicated scroll zone for logs
‚Ä¢	Dark/Blue gradient panels
‚Ä¢	Rounded window chrome
‚Ä¢	Custom minimize & close buttons
It remains clean and usable even at small window sizes.